generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Category {
  id       Int        @id
  name     String?    @db.VarChar(45)
  state    Int?
  Products Products[]
}

model Order {
  id                 Int
  code               Int?
  total_price        Decimal?             @db.Decimal(3, 0)
  state              Int?
  Users_id           Int
  Users              Users                @relation(fields: [Users_id], references: [id])
  Order_has_Products Order_has_Products[]

  @@id([id, Users_id])
  @@index([Users_id], name: "fk_Order_Users1_idx")
}

model Order_has_Products {
  Order_id             Int
  Products_id          Int
  Products_admin_id    Int
  Products_Category_id Int
  Order                Order    @relation(fields: [Order_id], references: [id])
  Products             Products @relation(fields: [Products_id, Products_admin_id, Products_Category_id], references: [id, admin_id, Category_id])

  @@id([Order_id, Products_id, Products_admin_id, Products_Category_id])
  @@index([Order_id], name: "fk_Order_has_Products_Order1_idx")
  @@index([Products_id, Products_admin_id, Products_Category_id], name: "fk_Order_has_Products_Products1_idx")
}

model Products {
  id                 Int
  name               String?              @db.VarChar(70)
  qte                Int?
  price              Decimal?             @db.Decimal(3, 0)
  Productscol        String?              @db.VarChar(45)
  admin_id           Int
  Category_id        Int
  Category           Category             @relation(fields: [Category_id], references: [id])
  admin              admin                @relation(fields: [admin_id], references: [id])
  Order_has_Products Order_has_Products[]
  comments           comments[]

  @@id([id, admin_id, Category_id])
  @@index([Category_id], name: "fk_Products_Category1_idx")
  @@index([admin_id], name: "fk_Products_admin1_idx")
}

model Users {
  id       Int        @id
  name     String?    @db.VarChar(45)
  email    String?    @db.VarChar(45)
  password String?    @db.Text
  role     Int?
  phone    String?    @db.VarChar(45)
  Order    Order[]
  comments comments[]
}

model admin {
  id       Int        @id
  name     String?    @db.VarChar(45)
  email    String?    @db.VarChar(45)
  password String?    @db.Text
  Products Products[]
}

model comments {
  id                   Int
  name                 String?  @db.VarChar(45)
  email                String?  @db.VarChar(45)
  comment              String?  @db.Text
  Users_id             Int
  Products_id          Int
  Products_admin_id    Int
  Products_Category_id Int
  Products             Products @relation(fields: [Products_id, Products_admin_id, Products_Category_id], references: [id, admin_id, Category_id])
  Users                Users    @relation(fields: [Users_id], references: [id])

  @@id([id, Users_id, Products_id, Products_admin_id, Products_Category_id])
  @@index([Products_id, Products_admin_id, Products_Category_id], name: "fk_comments_Products1_idx")
  @@index([Users_id], name: "fk_comments_Users_idx")
}
